<!doctype html><html lang=en-us prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
<meta charset=utf-8>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T8HDQQNE6X"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-T8HDQQNE6X')</script>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<meta name=description content>
<meta name=HandheldFriendly content="True">
<meta name=MobileOptimized content="320">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=keywords content>
<meta property="og:type" content="article">
<meta property="og:description" content>
<meta property="og:title" content="Build a Discord bot: A definitive guide – Part 1">
<meta property="og:site_name" content="The Personal Blog of Basil Labib">
<meta property="og:image" content>
<meta property="og:image:type" content="image/jpeg">
<meta property="og:image:width" content>
<meta property="og:image:height" content>
<meta property="og:url" content="https://basil08.github.io/post/build-a-discord-bot-a-definitive-guide-part-1/">
<meta property="og:locale" content="en-us">
<meta property="article:published_time" content="2021-10-08
"> <meta property="article:modified_time" content="2021-10-08
">
<meta name=twitter:card content="summary">
<meta name=twitter:site content="@BasilLabib">
<meta name=twitter:creator content="@BasilLabib">
<meta name=twitter:title content="Build a Discord bot: A definitive guide – Part 1 | The Personal Blog of Basil Labib">
<meta name=twitter:description content="In this guide, I will be building a Discord bot from scratch using only discord.js and a few open public APIs. I&rsquo;ll also explain each step and discuss the reason for preference of a particular way of implementation over others. So, let&rsquo;s get started.
WHAT ARE WE BUILDING? Mayhem is a simple Discord bot that is aimed for entertainment and fun. It queries external public APIs for images, jokes, facts and definitions.|">
<meta name=twitter:image:src content>
<meta name=twitter:domain content="https://basil08.github.io/post/build-a-discord-bot-a-definitive-guide-part-1/">
<title>Build a Discord bot: A definitive guide – Part 1</title>
<link rel=canonical href=https://basil08.github.io/post/build-a-discord-bot-a-definitive-guide-part-1/>
<link rel=stylesheet href=https://unpkg.com/tachyons@4.11.1/css/tachyons.min.css>
<link rel=stylesheet href=https://basil08.github.io/css/style.css>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/highlightjs@9.12.0/styles/github-gist.css>
<link rel=stylesheet href=https://basil08.github.io/mycss/custom.css>
<link rel="shortcut icon" href=/favicon.ico type=image/x-icon>
<link rel=apple-touch-icon href=/apple-touch-icon.png>
<script src=//cdn1.lncld.net/static/js/3.0.4/av-min.js></script>
<script src=//unpkg.com/valine/dist/Valine.min.js></script>
</head>
<body lang=en-us class="sans-serif w-90 w-80-m w-60-ns center mv2 mv5-ns" itemscope itemtype=http://schema.org/Article>
<span class=b>/ </span>
<a href=https://basil08.github.io/ class="b bb bw1 pb1 no-underline black">The Personal Blog of Basil Labib</a>
<span class=b> / </span>
<a href=/post class="b bb bw1 pb1 no-underline black">blog</a>
<section id=main class=mt5>
<h1 itemprop=name id=title>Build a Discord bot: A definitive guide – Part 1</h1>
<span class="f6 gray">October 8, 2021</span>
<article itemprop=articleBody id=content class="w-90 lh-copy">
<p>In this guide, I will be building a Discord bot from scratch using only <a href=https://discord.js.org>discord.js</a> and a few open public APIs. I&rsquo;ll also explain each step and discuss the reason for preference of a particular way of implementation over others. So, let&rsquo;s get started.</p>
<h2 id=what-are-we-building>WHAT ARE WE BUILDING?</h2>
<p><strong>Mayhem</strong> is a simple Discord bot that is aimed for entertainment and fun. It queries external public APIs for images, jokes, facts and definitions. Few commands are <code>meow</code>, <code>cat</code>, <code>whatis</code>, <code>whoami</code>, <code>ls</code>, <code>help</code>, <code>whereami</code> and so on. There is a subtle shoutout to UNIX if you&rsquo;re familiar ;).</p>
<p>Moreover, these commands are chosen and designed in a way to demonstrate capabilities of the Discord API. Thus, features such as exclusive commands, cooldown periods, pre-fetching etc. are also discussed.</p>
<h3 id=code-repository>CODE REPOSITORY</h3>
<p>The latest version of the codebase can be found <a href=https://github.com/basil08/mayhem>here</a>. Instructions for installation on your Discord server can be found in the <a href=https://github.com/basil08/mayhem/blob/main/README.md>README.md</a>.</p>
<p>For options to host the bot, see <a href=#deployment-options>Deployment Options</a> below.</p>
<h2 id=js-pre-requisite-check>JS PRE-REQUISITE CHECK</h2>
<p>You should be familiar with JavaScript and computer programming concepts such as loops and conditionals. But JS is a particularly notorious language as it is continuously being modified to suit the industry. You should know at least ES6 or ES7. If not, no worries! Below I cover few JS concepts we&rsquo;ll be using in this project.</p>
<h3 id=arrow-functions>ARROW FUNCTIONS</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>[<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>].<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>elem</span> =&gt; 
	{ <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;doubling!&#39;</span>);
	 <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>elem</span>; 
});
</code></pre></div><p>A syntactic-sugar to reduct clutter. Nothing more but highly convenient for writing chained promises (If you ever found yourself in such a situation that is).</p>
<h3 id=promises>PROMISES</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>URI</span>)
	.<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span> =&gt; <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>text</span>())
	.<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>tex</span> =&gt; <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(<span style=color:#a6e22e>tex</span>))
	.<span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>err</span> =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>err</span>));
</code></pre></div><p>A fix to execute asynchoronous statements synchoronously. Think of these commands as being executed <em>one after the other</em> and not all together because they can&rsquo;t as the data are dependent on successful execution of previous steps. I never liked it much.</p>
<h3 id=awaitasync-functions><code>await</code>/<code>async</code> FUNCTIONS</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>nano</span>(<span style=color:#a6e22e>args</span>){
	<span style=color:#66d9ef>const</span> <span style=color:#ae81ff>_</span><span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fs</span>.<span style=color:#a6e22e>readFile</span>(<span style=color:#e6db74>&#39;stuff.json&#39;</span>);
	<span style=color:#75715e>// more code
</span><span style=color:#75715e></span>}
</code></pre></div><p>Successor to Promises. Cleaner, more logical syntax. As opposed to being an API like Promises, async/await are keywords in JS now.</p>
<p>If you want to gain more insights into these constructs, it is recommended to check out <a href=https://developer.mozilla.org/en-US/docs/Learn/JavaScript/First_steps/What_is_JavaScript>MDN JavaScript module</a>.</p>
<h2 id=installation>INSTALLATION</h2>
<p>You need <a href=https://nodejs.org>Node.js</a> and a package manager such as <a href=https://npmjs.com><code>npm</code></a> or <a href=https://yarnpkg.com><code>yarn</code></a>. <code>npm</code> comes packaged with Node.</p>
<p>We will be using these npm packages:</p>
<ol>
<li><code>discord.js@12.4.1</code> or above (Note: The code is tested with this version only)</li>
<li><code>node-fetch@2.6.1</code></li>
</ol>
<h3 id=basic-setup>BASIC SETUP</h3>
<p>To make a new <code>node</code> project, run the following in your terminal:</p>
<pre tabindex=0><code>$ mkdir mayhem
$ cd mayhem
$ npm init -y     # -y to say yes to all defaults
$ npm install discordjs@12.4.1 node-fetch@2.6.1
$ touch bot.js
</code></pre><p>Then, open <code>package.json</code> and add a new script for convenience:</p>
<pre tabindex=0><code>...
 &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
    &quot;start&quot;: &quot;node bot.js&quot;
  },
...
</code></pre><h2 id=create-bot-application-and-generate-token>CREATE BOT APPLICATION AND GENERATE TOKEN</h2>
<p>Now, we have to create a bot application through your <a href=https://discord.com>Discord account</a> (Make one, we need it!). The steps are as follows:</p>
<ol>
<li>Login and open the <a href=https://discord.com/developers/applications>Discord Developer Portal</a>.</li>
<li>Click on the &ldquo;New Application&rdquo; button.</li>
<li>Enter a name and click &ldquo;Create&rdquo; button to confirm.</li>
</ol>
<figure><img src=/img/mayhem/0.jpg alt="Created New Application in Discord Developer Portal"><figcaption>
<p>Created New Application in Discord Developer Portal</p>
</figcaption>
</figure>
<p>You are free to edit other information as you wish on this page. We&rsquo;ll leave it to defaults. Then navigate to the &ldquo;Bots&rdquo; tab and click &ldquo;Add Bot&rdquo; button.</p>
<figure><img src=/img/mayhem/1.jpg alt="Created new bot and customized with a name and image icon"><figcaption>
<p>Created new bot and customized with a name and image icon</p>
</figcaption>
</figure>
<p>Clicking on &ldquo;Reveal Token&rdquo; will show your bot token. A <strong>Token</strong> is a unique identifier for your bot application and is used by Discord to authorize your bot to actually log in and appear online in a server.</p>
<p><strong>CAUTION</strong>: It is very important that you keep your token safe and secret. You must not mistakenly commit it to a public repo or such. The consequences can be disastrous. If the key got leaked by mistake, immediately click on &ldquo;Regenerate token&rdquo; to generate a new token and invalidate all previous tokens.</p>
<p><strong>WARNING</strong>: Make sure you copy the &ldquo;Bot Token&rdquo; and not the &ldquo;Client Secret&rdquo; or the &ldquo;Client Key&rdquo; which are on the Applications page.</p>
<h2 id=generate-bot-invite-link>GENERATE BOT INVITE LINK</h2>
<h3 id=bot-invite-links-explained>Bot invite links explained</h3>
<p>A typical invite link looks like this:</p>
<pre tabindex=0><code>https://discord.com/api/oauth2/authorize?client_id=123456789012345678&amp;permissions=0&amp;scope=bot%20applications.commands
</code></pre><p>The fields that need elaboration are the query parameters which are as follows:</p>
<ul>
<li><code>client_id</code>: The client id is the application that is authorized.</li>
<li><code>permissions</code>: an integers which encodes the bot&rsquo;s permissions on the server in binary.</li>
<li><code>scope=bot</code>: Yes, this is a bot invite link.</li>
<li><code>applications.commands</code>: To enable Discord to allow <code>/</code> (slash) to invoke bot commands.</li>
</ul>
<p>Head over to the OAuth2 page, scroll down and select <code>applications.commands</code> and <code>bot</code>. Then, choose permissions that you want your bot to have. The page handily generates the link for you.</p>
<figure><img src=/img/mayhem/2.jpg alt="Permissions for Mayhem"><figcaption>
<p>Permissions for Mayhem</p>
</figcaption>
</figure>
<p>Here, I show the permissions for our bot. As you can see, it is a fairly less-demanding bot in terms of administrative privileges.</p>
<figure><img src=/img/mayhem/3.jpg alt="Authorizing your bot into a server"><figcaption>
<p>Authorizing your bot into a server</p>
</figcaption>
</figure>
<p>Paste the generated link and you will be asked to authorize the server. Note: You can add them to servers in which <em>you</em> have admin access only. If successful, you&rsquo;re greeted by a confirmation dialog. Congratulations, now you can see Mayhem online with a &ldquo;BOT&rdquo; tag!</p>
<h2 id=upcoming>UPCOMING</h2>
<p>This is part one of the series &ldquo;Build a Discord Bot: A definitive guide&rdquo;. Expect part two soon!</p>
<div style="border-top:1px solid gray;border-bottom:1px solid gray;padding:1rem;padding-top:0">
<div>
<p>
<span style=font-size:larger;font-weight:700>Basil</span>
| <a href=https://twitter.com/BasilLabib>@BasilLabib</a>
</p>
<p style=margin:0%;color:#1a1818>
Tech, Science, Design, Economics, Finance, Books, Philosophy, Psychology.<br>
Basil blogs about complex topics in simple words.<br>
This blog is his passion project.
</p>
</div>
</div>
</article>
<div id=vcomment></div>
<script>new Valine({el:'#vcomment',appId:'feK7nt01ATB0bsSY0zMD3mxA-MdYXbMMI',appKey:'z1UFShUc40oPkqO8v8nKXG2a',lang:'en'})</script>
<span class="f6 gray mv3" title="Lastmod: October 8, 2021. Published at: 2021-10-08.">
</span>
</section>
<footer>
<div>
<p class="f6 gray mt6 lh-copy">
© 2020 <a href=https://twitter.com/BasilLabib>Basil Labib</a> | Made with ❤️ using <a href=https://gohugo.io>Hugo</a> & <a href=https://github.com/siegerts/hugo-theme-basic>Basic</a>
</p>
</div>
</footer>
<script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>